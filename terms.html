<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Terms and Conditions | Ngolay</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Poppins",sans-serif;}
body{background:#d9d9e3;color:#333;font-size:1.05rem;}

/* Header Styles */
.header{display:flex;justify-content:space-between;align-items:center;background-color:#656283;padding:10px 30px;color:white;position:relative;flex-wrap:wrap;}
.logo img{width:80px;height:80px;border-radius:50%;object-fit:cover;}
.nav{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;}
.nav a{color:white;text-decoration:none;margin:0 15px;font-weight:bold;transition:0.3s;white-space:nowrap;}
.nav a:hover{color:#ddd;}
.header-icons{display:flex;align-items:center;gap:15px;position:relative;flex-wrap:wrap;}

/* Search and Dropdown Styles */
.search-container{position:relative;}
.search-container input{display:none;position:absolute;top:40px;right:0;padding:8px 12px;border-radius:5px;border:none;width:200px;background:white;color:#333;}
#search-results{display:none;background:white;color:black;position:absolute;top:45px;right:0;max-height:300px;overflow-y:auto;width:250px;border-radius:5px;z-index:1000;padding:5px;box-shadow:0 2px 10px rgba(0,0,0,0.1);border:1px solid #ddd;}
#search-results div{padding:10px;cursor:pointer;border-bottom:1px solid #eee;transition:background-color 0.2s;}
#search-results div:hover{background-color:#f5f5f5;}
#search-results div:last-child{border-bottom:none;}
.account-dropdown{position:relative;}
.account-dropdown .dropdown-menu{display:none;position:absolute;right:0;top:35px;background-color:white;border-radius:5px;overflow:hidden;z-index:10;box-shadow:0 2px 10px rgba(0,0,0,0.1);min-width:150px;}
.account-dropdown .dropdown-menu a{display:block;color:#656283;padding:10px 20px;text-decoration:none;border-bottom:1px solid #eee;}
.account-dropdown .dropdown-menu a:hover{background:#f5f5f5;}
.account-dropdown .dropdown-menu a:last-child{border-bottom:none;}

/* Terms Section */
.terms{background-color:#b8b7ca;padding:60px 80px;line-height:1.6;min-height:70vh;}
.terms h2{text-align:center;font-size:2em;margin-bottom:20px;color:#333;}
.terms p{margin-bottom:15px;}
.terms h3{margin-top:25px;color:#333;}

/* Footer - Made Responsive */
.footer{background:#656283;color:white;padding:40px;display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:30px;}
.footer-logo{flex-shrink:0;}
.footer-logo img{width:70px;height:70px;border-radius:50%;object-fit:cover;}
.footer-links{flex:1;display:flex;justify-content:center;gap:60px;flex-wrap:wrap;}
.footer-section{min-width:150px;}
.footer-section h3{margin-bottom:10px;font-size:1.1em;}
.footer-section a{display:block;color:white;text-decoration:none;margin:5px 0;font-size:1.05em;transition:color 0.3s;}
.footer-section a:hover{color:#ddd;}
.footer-bottom{width:100%;text-align:center;border-top:1px solid #555;margin-top:20px;padding-top:15px;color:#aaa;}

/* Responsive Design */
@media (max-width: 1024px) {
  .terms{padding:50px 40px;}
  .footer-links{gap:40px;}
}

@media (max-width: 768px){
  .header{flex-direction:column;gap:15px;padding:15px 20px;}
  .nav{order:2;width:100%;justify-content:center;}
  .header-icons{order:3;justify-content:center;}
  .terms{padding:40px 20px;}
  .footer{padding:30px 20px;flex-direction:column;align-items:center;text-align:center;gap:25px;}
  .footer-links{flex-direction:column;align-items:center;gap:30px;}
  .footer-section{text-align:center;}
}

@media (max-width: 480px){
  .terms{padding:30px 15px;}
  .terms h2{font-size:1.6em;}
  .footer{padding:25px 15px;}
  .footer-links{gap:25px;}
  .nav a{margin:0 8px;font-size:0.95em;}
}
</style>
</head>
<body>

<!-- Header -->
<header class="header">
  <div class="logo"><img src="logo.png" alt="Ngolay Logo"></div>
  <nav class="nav">
    <a href="index.html">Home</a>
    <a href="categories.html">Categories</a>
    <a href="cart.html">Cart</a>
    <a href="wishlist.html">Wishlist</a>
  </nav>
  <div class="header-icons">
    <div class="search-container">
      <i class="search-icon" id="search-icon" style="cursor:pointer;">üîç</i>
      <input type="text" id="search-bar" placeholder="Search products...">
      <div id="search-results"></div>
    </div>
    <div class="account-dropdown">
      <i class="account-icon" id="account-icon" style="cursor:pointer;">üë§</i>
      <div class="dropdown-menu" id="dropdown-menu">
        <a href="account.html">Account</a>
        <a href="login.html">Log in</a>
        <a href="#" id="logout-btn">Log Out</a>
      </div>
    </div>
  </div>
</header>

<!-- Terms and Conditions Section -->
<section class="terms">
  <h2>Terms and Conditions for Ngolay</h2>
  <p>Welcome to Ngolay, a college marketplace platform. By accessing or using our website, you agree to these Terms and Conditions. Please read them carefully.</p>

  <h3>1. Acceptance of Terms</h3>
  <p>By creating an account or using Ngolay, you agree to comply with these Terms and all applicable laws.</p>

  <h3>2. Eligibility</h3>
  <p>Ngolay is intended for college students and individuals connected to academic institutions.</p>

  <h3>3. Accounts</h3>
  <p>You are responsible for your account and activity. We may suspend accounts that break rules.</p>

  <h3>4. Prohibited Use</h3>
  <p>No scams, fake or illegal items, offensive content, or harassment are allowed on Ngolay.</p>

  <h3>5. User Content</h3>
  <p>You retain rights to your content but grant Ngolay a license to display it on our platform.</p>

  <h3>6. Transactions</h3>
  <p>Ngolay facilitates connections but is not responsible for transactions between users.</p>

  <h3>7. Privacy</h3>
  <p>Your privacy is important. We handle your data as described in our Privacy Policy.</p>

  <h3>8. Termination</h3>
  <p>We may terminate or suspend access to our service for violations of these Terms.</p>

  <h3>9. Changes to Terms</h3>
  <p>We may modify these Terms at any time. Continued use constitutes acceptance of changes.</p>

  <h3>10. Contact Information</h3>
  <p>For questions about these Terms, please contact us through our contact page.</p>
</section>

<!-- Footer -->
<footer class="footer">
  <div class="footer-logo"><img src="logo.png" alt="Ngolay Logo"></div>
  <div class="footer-links">
    <div class="footer-section">
      <h3>Company</h3>
      <a href="about.html">About Us</a>
      <a href="contact.html">Contact</a>
    </div>
    <div class="footer-section">
      <h3>Our Information</h3>
      <a href="terms.html">Terms and Conditions</a>
      <a href="faq.html">FAQ</a>
    </div>
  </div>
  <div class="footer-bottom"><p>¬© 2025 Ngolay. All Rights Reserved</p></div>
</footer>

<script type="module">
// Firebase setup
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore, collection, getDocs, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCJfAyK_wma5RaTv6DODRgCDExnFuLXK00",
  authDomain: "ngolay-project.firebaseapp.com",
  projectId: "ngolay-project",
  storageBucket: "ngolay-project.appspot.com",
  messagingSenderId: "236457585222",
  appId: "1:236457585222:web:9133bb46a97ef678d23847"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

let allProducts = [];
let currentUserUid = null;

// Load products for search functionality
async function loadProductsForSearch() {
  try {
    const productsCol = collection(db, "products");
    const snapshot = await getDocs(productsCol);
    allProducts = snapshot.docs.map(docSnap => ({ 
      id: docSnap.id, 
      ...docSnap.data() 
    }));
  } catch (error) {
    console.error("Error loading products for search:", error);
  }
}

// Track page visit in Firestore
async function trackPageVisit(pageName) {
  if (!currentUserUid) return;
  
  try {
    const visitRef = doc(db, "page_visits", `${currentUserUid}_${pageName}`);
    const visitSnap = await getDoc(visitRef);
    
    if (!visitSnap.exists()) {
      // First time visiting this page
      await setDoc(visitRef, {
        userId: currentUserUid,
        pageName: pageName,
        firstVisit: new Date(),
        lastVisit: new Date(),
        visitCount: 1
      });
      showWelcomeMessage(pageName);
    } else {
      // Update existing visit record
      const visitData = visitSnap.data();
      await setDoc(visitRef, {
        ...visitData,
        lastVisit: new Date(),
        visitCount: (visitData.visitCount || 0) + 1
      });
    }
  } catch (error) {
    console.error("Error tracking page visit:", error);
  }
}

// Show welcome message for first-time visitors
function showWelcomeMessage(pageName) {
  const messages = {
    'terms': "Welcome to Ngolay's Terms and Conditions page!",
    'faq': "Welcome to Ngolay's FAQ section!"
  };
  
  if (messages[pageName]) {
    alert(messages[pageName]);
  }
}

// Search toggle
const searchIcon = document.getElementById("search-icon");
const searchBar = document.getElementById("search-bar");
const searchResults = document.getElementById("search-results");

searchIcon.addEventListener("click", () => { 
  searchBar.style.display = searchBar.style.display === 'block' ? 'none' : 'block'; 
  if (searchBar.style.display === 'block') searchBar.focus();
});

// Search functionality
searchBar.addEventListener('input', () => {
  const queryText = searchBar.value.trim().toLowerCase();
  searchResults.innerHTML = '';
  
  if (!queryText) { 
    searchResults.style.display = 'none'; 
    return; 
  }

  const matched = allProducts.filter(p => 
    p.name && p.name.toLowerCase().includes(queryText) || 
    (p.category && p.category.toLowerCase().includes(queryText))
  );

  if (matched.length === 0) {
    searchResults.innerHTML = '<div>No products found.</div>';
  } else {
    matched.forEach(p => {
      const div = document.createElement('div');
      div.textContent = `${p.name} (${p.category})`;
      div.addEventListener('click', () => {
        window.location.href = `product_detail.html?id=${p.id}`;
      });
      searchResults.appendChild(div);
    });
  }
  
  searchResults.style.display = 'block';
});

// Close search results when clicking outside
document.addEventListener('click', (e) => {
  if (!searchBar.contains(e.target) && !searchResults.contains(e.target) && e.target !== searchIcon) {
    searchResults.style.display = 'none';
  }
});

// Account dropdown toggle
const accountIcon = document.getElementById("account-icon");
const dropdownMenu = document.getElementById("dropdown-menu");
accountIcon.addEventListener("click", () => { 
  dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block'; 
});
document.addEventListener("click", e => { 
  if (!accountIcon.contains(e.target) && !dropdownMenu.contains(e.target)) { 
    dropdownMenu.style.display = 'none'; 
  } 
});

// Logout button
document.getElementById("logout-btn").addEventListener("click", async (e) => {
  e.preventDefault();
  try {
    await signOut(auth);
    window.location.href = "login.html";
  } catch (error) {
    console.error("Error signing out:", error);
  }
});

// Check authentication state
onAuthStateChanged(auth, (user) => {
  if (user) {
    currentUserUid = user.uid;
    console.log("User is signed in:", user.uid);
    // Track page visit after authentication
    trackPageVisit('terms');
  } else {
    currentUserUid = null;
    console.log("User is signed out");
  }
});

// Load products on page load
window.addEventListener('load', () => {
  loadProductsForSearch();
});
</script>

</body>
</html>
